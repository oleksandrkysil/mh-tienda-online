import{_ as Y}from"./CDBd4BCr.js";import{d as G,u as N,x as U,H as h,J as A,U as z,o as k,c as C,e as g,a as b,b as n,A as H,B as K,K as J,_ as R,C as X,V as Z,W as ee,X as D,D as O,L as te,Y as ne,i as $,Z as oe,h as se,w as W,f as re,t as V,g as ae}from"./BQsMxEgi.js";import{_ as ie}from"./CJhYWWQG.js";import{u as le}from"./DPOvE4hd.js";const ce={class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},ue=["disabled"],de=["max"],pe=["disabled"],me=G({__name:"QuantityInput",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:s,isUpdatingCart:r,cart:u}=N(),{debounce:v}=U(),t=h(()=>{var a,i;return e.item.variation?(a=e.item.variation)==null?void 0:a.node:(i=e.item.product)==null?void 0:i.node}),o=A(e.item.quantity),_=h(()=>t.value.stockQuantity?t.value.stockQuantity<=o.value:!1),y=()=>o.value++,m=()=>o.value--;z(o,v(()=>{o.value!==""&&s(e.item.key,o.value)},250));const d=()=>{var a,i,c;if(o.value===""){const p=(c=(i=(a=u.value)==null?void 0:a.contents)==null?void 0:i.nodes)==null?void 0:c.find(f=>f.key===e.item.key);p&&(o.value=p.quantity)}};return(a,i)=>{const c=R;return k(),C("div",ce,[g("button",{title:"Decrease Quantity","aria-label":"Decrease Quantity",onClick:m,type:"button",class:"focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed",disabled:n(r)||n(o)<=0},[b(c,{name:"ion:remove",size:"14"})],8,ue),H(g("input",{"onUpdate:modelValue":i[0]||(i[0]=p=>J(o)?o.value=p:null),type:"number",min:"0",max:n(t).stockQuantity,"aria-label":"Quantity",onFocusout:d,class:"flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300"},null,40,de),[[K,n(o),void 0,{number:!0}]]),g("button",{title:"Increase Quantity","aria-label":"Increase Quantity",onClick:y,type:"button",class:"focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100",disabled:n(r)||n(_)},[b(c,{name:"ion:add",size:"14"})],8,pe)])}}}),fe=X(me,[["__scopeId","data-v-56ab9f24"]]),ve={},he={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 512 512"};function ye(e,s){return k(),C("svg",he,s[0]||(s[0]=[g("path",{d:"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),g("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M80 112h352"},null,-1),g("path",{d:"M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}const ge=X(ve,[["render",ye]]);function _e(e){return Z()?(ee(e),!0):!1}function q(e){return typeof e=="function"?e():n(e)}const xe=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const be=Object.prototype.toString,we=e=>be.call(e)==="[object Object]",B=()=>{},F=xe?window:void 0;function ke(e){var s;const r=q(e);return(s=r==null?void 0:r.$el)!=null?s:r}function j(...e){let s,r,u,v;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,u,v]=e,s=F):[s,r,u,v]=e,!s)return B;Array.isArray(r)||(r=[r]),Array.isArray(u)||(u=[u]);const t=[],o=()=>{t.forEach(d=>d()),t.length=0},_=(d,a,i,c)=>(d.addEventListener(a,i,c),()=>d.removeEventListener(a,i,c)),y=z(()=>[ke(s),q(v)],([d,a])=>{if(o(),!d)return;const i=we(a)?{...a}:a;t.push(...r.flatMap(c=>u.map(p=>_(d,c,p,i))))},{immediate:!0,flush:"post"}),m=()=>{y(),o()};return _e(m),m}function Se(e,s={}){const{threshold:r=50,onSwipe:u,onSwipeEnd:v,onSwipeStart:t,passive:o=!0,window:_=F}=s,y=D({x:0,y:0}),m=D({x:0,y:0}),d=h(()=>y.x-m.x),a=h(()=>y.y-m.y),{max:i,abs:c}=Math,p=h(()=>i(c(d.value),c(a.value))>=r),f=A(!1),S=h(()=>p.value?c(d.value)>c(a.value)?d.value>0?"left":"right":a.value>0?"up":"down":"none"),E=l=>[l.touches[0].clientX,l.touches[0].clientY],L=(l,w)=>{y.x=l,y.y=w},Q=(l,w)=>{m.x=l,m.y=w};let x;const I=Ce(_==null?void 0:_.document);o?x=I?{passive:!0}:{capture:!1}:x=I?{passive:!1,capture:!0}:{capture:!0};const M=l=>{f.value&&(v==null||v(l,S.value)),f.value=!1},P=[j(e,"touchstart",l=>{if(l.touches.length!==1)return;x.capture&&!x.passive&&l.preventDefault();const[w,T]=E(l);L(w,T),Q(w,T),t==null||t(l)},x),j(e,"touchmove",l=>{if(l.touches.length!==1)return;const[w,T]=E(l);Q(w,T),!f.value&&p.value&&(f.value=!0),f.value&&(u==null||u(l))},x),j(e,["touchend","touchcancel"],M,x)];return{isPassiveEventSupported:I,isSwiping:f,direction:S,coordsStart:y,coordsEnd:m,lengthX:d,lengthY:a,stop:()=>P.forEach(l=>l())}}function Ce(e){if(!e)return!1;let s=!1;const r={get passive(){return s=!0,!1}};return e.addEventListener("x",B,r),e.removeEventListener("x",B),s}const Ee={key:0,class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},Ie={__name:"SwipeCard",emits:["remove"],setup(e,{emit:s}){const r=s,u=A(!0),v=A(null),{isSwiping:t,lengthX:o}=Se(v,{passive:!0,onSwipeEnd(){o.value>80&&(u.value=!1,r("remove"))}});return(_,y)=>{const m=ge;return n(u)?(k(),C("div",Ee,[b(m,{class:O(["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":n(o)>40,"delete-ready":n(o)>80}])},null,8,["class"]),g("div",{class:O(["rounded-lg inset-0 absolute",{"transition-all":!n(t)}]),ref_key:"el",ref:v,style:ne({transform:n(t)?`translateX(-${n(o)}px)`:"none"})},[te(_.$slots,"default")],6)])):$("",!0)}}},$e={key:0,class:"flex items-center gap-3 group"},Qe={class:"flex-1"},Me={class:"flex gap-x-2 gap-y-1 flex-wrap items-center"},Pe={key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"},Te={key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"},Ae={class:"inline-flex gap-2 flex-col items-end"},Le={class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},Ve={__name:"CartCard",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:s}=N(),{addToWishlist:r}=le(),{FALLBACK_IMG:u}=U(),{storeSettings:v}=oe(),t=h(()=>{var p,f;return e.item.variation?(p=e.item.variation)==null?void 0:p.node:(f=e.item.product)==null?void 0:f.node}),o=h(()=>`/product/${decodeURIComponent(e.item.product.node.slug)}`),_=h(()=>t.value.stockQuantity?t.value.lowStockAmount>=t.value.stockQuantity:!1),y=h(()=>{var p,f,S;return((p=t.value.image)==null?void 0:p.cartSourceUrl)||((f=t.value.image)==null?void 0:f.sourceUrl)||((S=e.item.product.image)==null?void 0:S.sourceUrl)||u}),m=h(()=>parseFloat(t.value.rawRegularPrice)),d=h(()=>parseFloat(t.value.rawSalePrice)),a=h(()=>Math.round((m.value-d.value)/m.value*100)+"%"),i=()=>{s(e.item.key,0)},c=()=>{r(e.item.product.node),i()};return(p,f)=>{const S=Y,E=ae,L=ie,Q=fe,x=R,I=Ie;return k(),se(I,{onRemove:i},{default:W(()=>[n(t)?(k(),C("div",$e,[b(E,{to:n(o)},{default:W(()=>{var M,P;return[b(S,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:n(y),alt:((M=n(t).image)==null?void 0:M.altText)||n(t).name,title:((P=n(t).image)==null?void 0:P.title)||n(t).name,loading:"lazy"},null,8,["src","alt","title"])]}),_:1},8,["to"]),g("div",Qe,[g("div",Me,[b(E,{class:"leading-tight",to:n(o)},{default:W(()=>[re(V(n(t).name),1)]),_:1},8,["to"]),n(t).salePrice?(k(),C("span",Pe," Save "+V(n(a)),1)):$("",!0),n(_)?(k(),C("span",Te," Low Stock ")):$("",!0)]),b(L,{class:"mt-1 text-xs","sale-price":n(t).salePrice,"regular-price":n(t).regularPrice},null,8,["sale-price","regular-price"])]),g("div",Ae,[b(Q,{item:e.item},null,8,["item"]),g("div",Le,[n(v).showMoveToWishlist?(k(),C("button",{key:0,class:"mr-2 pr-2 border-r",onClick:c,type:"button"},"Move to Wishlist")):$("",!0),g("button",{title:"Remove Item","aria-label":"Remove Item",onClick:i,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[b(x,{name:"ion:trash",class:"hidden md:inline-block",size:"12"})])])])])):$("",!0)]),_:1})}}};export{ge as _,Ve as a};
