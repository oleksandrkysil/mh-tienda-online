import{d as z,M as E,Z as V,H as P,b as g,o,c as C,t as U,i as h,C as H,F as L,r as O,a as R,Y as T,_ as J,N as Q,J as F,U as W,h as k,w as M,e as D,g as Y}from"./BQsMxEgi.js";import{_ as Z}from"./CDBd4BCr.js";import{_ as G}from"./CJhYWWQG.js";const K={key:0,class:"red-badge"},X=z({__name:"SaleBadge",props:{node:{type:Object,required:!0}},setup(e){const{t:s}=E(),{storeSettings:l}=V(),c=P(()=>{var p,y,x,v;if(!((p=e.node)!=null&&p.rawSalePrice)||!((y=e.node)!=null&&y.rawRegularPrice))return"";const r=parseFloat((x=e.node)==null?void 0:x.rawSalePrice),m=parseFloat((v=e.node)==null?void 0:v.rawRegularPrice);return Math.round((r-m)/m*100)+" %"}),d=P(()=>e.node.rawSalePrice&&l.saleBadge!=="hidden"),f=P(()=>(l==null?void 0:l.saleBadge)==="percent"?c.value:s("messages.shop.onSale")?s("messages.shop.onSale"):"Sale");return(r,m)=>g(d)?(o(),C("span",K,U(g(f)),1)):h("",!0)}}),ee=H(X,[["__scopeId","data-v-395a4e44"]]),te={class:"inline-flex items-center"},ne={key:0,class:"text-xs ml-1 text-gray-500"},ae=z({__name:"StarRating",props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup(e){return(s,l)=>{const c=J;return o(),C("div",te,[(o(),C(L,null,O(5,d=>R(c,{key:d,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:T({color:e.rating<d?"#ccc":"#FBBE24"})},null,8,["size","style"])),64)),e.count!==null&&!e.hideCount?(o(),C("span",ne,"("+U(e.count)+")",1)):h("",!0)])}}}),oe={class:"relative group"},se={class:"p-2"},le={class:"mb-2 font-light leading-tight group-hover:text-primary"},N=280,ue=z({__name:"ProductCard",props:{node:{type:Object,required:!0},index:{type:Number,default:1}},setup(e){var y,x,v,I;const s=Q(),{storeSettings:l}=V(),c=e,d=Math.round(N*1.125),f=F((y=s.query)==null?void 0:y.filter),r=F(((I=(v=(x=f.value)==null?void 0:x.split("pa_color[")[1])==null?void 0:v.split("]")[0])==null?void 0:I.split(","))||[]);W(()=>s.query,()=>{var n,a,t;f.value=s.query.filter,r.value=((t=(a=(n=f.value)==null?void 0:n.split("pa_color[")[1])==null?void 0:a.split("]")[0])==null?void 0:t.split(","))||[]});const m=P(()=>{var n,a,t,i;return((a=(n=c.node)==null?void 0:n.image)==null?void 0:a.producCardSourceUrl)||((i=(t=c.node)==null?void 0:t.image)==null?void 0:i.sourceUrl)||"/images/placeholder.jpg"}),p=P(()=>{var n,a,t,i,_,b;if(r.value.length){const u=(a=(n=c.node)==null?void 0:n.variations)==null?void 0:a.nodes.filter(S=>{var j;const B=(j=S.attributes)==null?void 0:j.nodes.some(w=>r.value.some($=>{var q;return(q=w==null?void 0:w.value)==null?void 0:q.includes($)})),A=r.value.some(w=>{var $;return($=S.slug)==null?void 0:$.includes(w)});return B||A});if(u!=null&&u.length)return((i=(t=u[0])==null?void 0:t.image)==null?void 0:i.producCardSourceUrl)||((b=(_=u[0])==null?void 0:_.image)==null?void 0:b.sourceUrl)||m.value}return m.value});return(n,a)=>{const t=ee,i=Z,_=Y,b=ae,u=G;return o(),C("div",oe,[e.node.slug?(o(),k(_,{key:0,to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:M(()=>{var S,B;return[R(t,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),g(p)?(o(),k(i,{key:0,width:N,height:g(d),src:g(p),alt:((S=e.node.image)==null?void 0:S.altText)||e.node.name||"Product image",title:((B=e.node.image)==null?void 0:B.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:`sm:${N/2}px md:${N}px`,class:"rounded-lg object-top object-cover w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,8,["height","src","alt","title","loading","sizes"])):h("",!0)]}),_:1},8,["to","title"])):h("",!0),D("div",se,[g(l).showReviews?(o(),k(b,{key:0,rating:e.node.averageRating,count:e.node.reviewCount},null,8,["rating","count"])):h("",!0),e.node.slug?(o(),k(_,{key:1,to:`/product/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:M(()=>[D("h2",le,U(e.node.name),1)]),_:1},8,["to","title"])):h("",!0),R(u,{class:"text-sm","sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,8,["sale-price","regular-price"])])])}}});export{ee as _,ae as a,ue as b};
